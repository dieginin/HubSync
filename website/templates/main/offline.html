{% extends "base.html" %}

{% block title %}Offline - HubSync{% endblock %}

{% block content %}
<div class="d-flex align-items-center justify-content-center min-vh-100" style="margin-top: -65px;">
    <div class="text-center">
        <div class="mb-4">
            <i class="bi bi-wifi-off" style="font-size: 4rem; color: var(--text-muted);"></i>
        </div>

        <h1 class="mb-3">No Internet Connection</h1>

        <p class="text-muted mb-4">
            Unable to connect to the server at this time.<br>
            Check your internet connection and try again.
        </p>

        <button class="btn btn-primary" onclick="checkConnectionAndReload()">
            <i class="bi bi-arrow-clockwise me-2"></i>Retry Connection
        </button>

        <div class="mt-5">
            <h5 class="mb-3">Suggestions:</h5>
            <ul class="list-unstyled text-start" style="max-width: 400px;">
                <li class="mb-2"><i class="bi bi-check-circle text-primary me-2"></i>Check your device is connected to
                    the Internet</li>
                <li class="mb-2"><i class="bi bi-check-circle text-primary me-2"></i>Make sure Wi-Fi or mobile data is
                    enabled</li>
                <li class="mb-2"><i class="bi bi-check-circle text-primary me-2"></i>Try refreshing the page in a few
                    moments</li>
                <li class="mb-2"><i class="bi bi-check-circle text-primary me-2"></i>If the problem persists, contact
                    the administrator</li>
            </ul>
        </div>
    </div>
</div>

<script>
    // Check connection every 5 seconds
    function checkConnection() {
        if (navigator.onLine) {
            // If there's connection, try to reload the original page
            window.location.href = '/';
        }
    }

    // Function for the retry button
    function checkConnectionAndReload() {
        checkConnection();
        setTimeout(() => {
            window.location.reload();
        }, 1000);
    }

    // Check connection immediately
    checkConnection();

    // Check every 5 seconds
    setInterval(checkConnection, 5000);

    // Listen to connection events
    window.addEventListener('online', () => {
        window.location.href = '/';
    });
</script>
{% endblock %}