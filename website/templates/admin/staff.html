{% extends "base.html" %}

{% block title %}Staff | HubSync{% endblock %}

{% block content %}
<div data-pull-to-refresh>
    <div class="d-grid">
        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#newMember">
            Add Staff Member
        </button>
    </div>
    <ul class="list-group list-group-flush mt-2" id="staff-list">
        {% for member in staff if member.id != 1 and current_user.id != member.id %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
            <div class="d-flex align-items-center">
                {{ member.display_name }}&emsp;
                {% if member.role == 'superadmin' %}
                <span class="badge rounded-pill bg-superadmin">{{ member.role }}</span>
                {% elif member.role == 'admin' %}
                <span class="badge rounded-pill bg-admin">{{ member.role }}</span>
                {% else %}
                <span class="badge rounded-pill bg-member">{{ member.role }}</span>
                {% endif %}
            </div>
            <div class="btn-group" role="group" aria-label="Staff Actions">
                <button type="button" class="btn btn-sm btn-warning" title="Edit" data-bs-toggle="modal"
                    data-bs-target="#editMember{{ member.id }}">
                    <i class="bi bi-pencil-fill"></i>
                </button>
                <button type="button" class="btn btn-sm btn-danger" title="Delete" data-bs-toggle="modal"
                    data-bs-target="#deleteMember{{ member.id }}">
                    <i class="bi bi-trash-fill"></i>
                </button>
            </div>
        </li>

        {% include 'admin/partials/edit_member.html' %}
        {% include 'admin/partials/delete_member.html' %}
        {% else %}
        <li class="list-group-item text-center text-muted">No staff members found</li>
        {% endfor %}
    </ul>
    {% include 'admin/partials/new_member.html' %}
</div>

<script src="{{ url_for('static', filename='js/pull-to-refresh.js') }}"></script>
{% endblock %}