{% extends "base.html" %}
{% block title %}Staff | HubSync{% endblock %}

{% from "components/buttons.html" import modal_button %}
{% from "components/inputs.html" import name_input, email_input, role_input, username_input %}
{% from "components/layout.html" import buttons_block, role_badge %}

{% block content %}
<div data-pull-to-refresh>
    {{ buttons_block([modal_button("Add Staff Member", "newMember")]) }}

    <ul class="list-group list-group-flush mt-2" id="staff-list">
        {% for member in staff if member.id != 1 and current_user.id != member.id %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
            <div class="d-flex align-items-center">
                {{ member.display_name }}&emsp;
                {{ role_badge(member.role) }}
            </div>
            <div class="btn-group" role="group" aria-label="Staff Actions">
                <button type="button" class="btn btn-sm btn-warning" title="Edit" data-bs-toggle="modal"
                    data-bs-target="#editMember{{ member.id }}">
                    <i class="bi bi-pencil-fill"></i>
                </button>
                <button type="button" class="btn btn-sm btn-danger" title="Delete" data-bs-toggle="modal"
                    data-bs-target="#deleteMember{{ member.id }}">
                    <i class="bi bi-trash-fill"></i>
                </button>
            </div>
        </li>

        {% include 'admin/partials/edit_member.html' %}
        {% include 'admin/partials/delete_member.html' %}
        {% else %}
        <li class="list-group-item text-center text-muted">No staff members found</li>
        {% endfor %}
    </ul>
    {% include 'admin/partials/new_member.html' %}
</div>

<script src="{{ url_for('static', filename='js/pull-to-refresh.js') }}"></script>
{% endblock %}