{% if current_user.is_authenticated %}
<nav class="navbar fixed-top" aria-label="offcanvas navbar">
    <div class="container-fluid">
        <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar"
            aria-controls="offcanvasNavbar">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="d-flex align-items-center gap-3">
            <span class="navbar-text">
                {% set display_parts = current_user.display_name.split() %}
                {% if display_parts|length > 1 %}
                {{ display_parts[0] }} {{ display_parts[1][0] }}.
                {% else %}
                {{ current_user.display_name }}
                {% endif %}
            </span>
            <a class="nav-link text-danger d-flex align-items-center" href="{{ url_for('auth.logout') }}"
                title="Logout">
                <i class="bi bi-box-arrow-right me-1"></i>
                <span class="d-none d-md-inline">Logout</span>
            </a>
        </div>
        <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasNavbar"
            aria-labelledby="offcanvasNavbarLabel">
            <div class="offcanvas-header">
                <h5 class="offcanvas-title user-select-none" id="offcanvasNavbarLabel">HubSync</h5>
                <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>
            <div class="offcanvas-body">
                <div class="d-flex flex-column h-100">

                    <!-- Main navigation -->
                    <ul class="nav nav-pills flex-column mb-auto">
                        <li class="nav-item">
                            <a class="nav-link" id="home-link" href="{{ url_for('main.home') }}">
                                <i class="bi bi-house-fill me-2"></i>Home
                            </a>
                        </li>
                        {% if current_user.is_admin() %}
                        <li class="nav-item">
                            <a class="nav-link" id="staff-link" href="{{ url_for('admin.staff') }}">
                                <i class="bi bi-people-fill me-2"></i>Staff
                            </a>
                        </li>
                        {% endif %}
                        <li class="nav-item">
                            <a class="nav-link" id="schedule-link" href="{{ url_for('team.schedule') }}">
                                <i class="bi bi-calendar-week-fill me-2"></i>Schedule
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" id="layouts-link" href="{{ url_for('room.layouts') }}">
                                <i class="bi bi-grid-1x2-fill me-2"></i>Layouts
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" id="tasks-link" href="{{ url_for('team.tasks') }}">
                                <i class="bi bi-list-task me-2"></i>Tasks
                            </a>
                        </li>
                        {% if current_user.role == "superadmin" %}
                        <li class="nav-item">
                            <a class="nav-link" id="invox-link" href="{{ url_for('admin.invox') }}">
                                <i class="bi bi-receipt me-2"></i>Invox
                            </a>
                        </li>
                        {% endif %}
                    </ul>

                    <!-- Bottom actions -->
                    <hr>
                    <ul class="nav nav-pills flex-column">
                        <li class="nav-item">
                            <a class="nav-link" id="settings-link" href="{{ url_for('main.settings') }}">
                                <i class="bi bi-gear-fill me-2"></i>Settings
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</nav>
{% endif %}